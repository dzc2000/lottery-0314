24-07-11.09:11:58.760 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80138 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:11:58.761 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:11:59.233 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:11:59.235 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:11:59.251 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:11:59.894 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:11:59.914 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:12:00.002 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:12:00.034 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:12:00.905 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:12:00.938 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.43 seconds (JVM running for 3.242)
24-07-11.09:12:01.217 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:12:01.219 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:12:01.242 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:12:01.502 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:12:01.526 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:12:01.526 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:12:01.606 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:12:01.609 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:12:01.626 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:12:10.126 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:12:10.193 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:12:13.209 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:12:13.220 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:12:21.044 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80160 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:12:21.045 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:12:21.473 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:12:21.474 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:12:21.488 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:12:22.073 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:12:22.093 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:12:22.180 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:12:22.188 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:12:22.889 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:12:22.922 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.118 seconds (JVM running for 2.703)
24-07-11.09:12:23.150 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:12:23.153 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:12:23.168 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:12:23.336 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:12:23.362 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:12:23.362 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:12:23.429 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:12:23.431 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:12:23.444 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:12:25.488 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:12:59.964 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:16:18.221 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m18s255ms).
24-07-11.09:16:35.791 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:17:05.250 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=47s32ms).
24-07-11.09:17:05.251 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:17:34.857 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.09:17:34.972 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:17:34.978 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:17:38.656 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80226 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:17:38.657 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:17:39.132 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:17:39.134 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:17:39.148 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:17:39.754 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:17:39.772 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:17:39.857 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:17:39.865 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:17:40.574 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:17:40.607 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.222 seconds (JVM running for 2.816)
24-07-11.09:17:40.868 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:17:40.876 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:17:40.892 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:17:41.098 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:17:41.119 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:17:41.119 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:17:41.194 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:17:41.196 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:17:41.207 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:17:47.784 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:17:51.846 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.09:17:54.785 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:17:54.791 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-11.09:17:54.887 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:17:54.892 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 101
24-07-11.09:17:54.892 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 101 rule_default
24-07-11.09:17:54.920 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:101
24-07-11.09:17:54.927 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:17:54.932 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:101
24-07-11.09:17:54.941 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:101
24-07-11.09:17:55.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:17:55.103 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-11.09:17:57.459 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:17:57.466 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:18:42.622 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80242 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:18:42.623 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:18:43.057 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:18:43.058 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:18:43.072 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:18:43.681 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:18:43.701 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:18:43.803 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:18:43.816 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:18:44.595 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:18:44.633 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.253 seconds (JVM running for 2.772)
24-07-11.09:18:44.896 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:18:44.900 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:18:44.915 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:18:45.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:18:45.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存 strategyId:100006 awardId:102
24-07-11.09:18:45.090 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:18:45.111 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:18:45.112 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:18:45.188 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:18:45.190 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:18:45.203 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:18:51.767 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:18:51.773 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.09:19:01.488 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:19:08.487 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:19:08.488 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-11.09:19:08.500 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:19:08.504 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:19:08.504 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:19:08.542 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:19:08.544 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:19:08.544 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:19:09.604 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:19:09.613 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:19:11.873 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80253 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:19:11.873 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:19:12.285 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:19:12.286 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:19:12.300 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
24-07-11.09:19:12.877 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:19:12.896 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:19:12.981 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:19:12.992 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:19:13.775 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:19:13.810 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.163 seconds (JVM running for 2.675)
24-07-11.09:19:14.049 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:19:14.051 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:19:14.067 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:19:14.246 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:19:14.268 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:19:14.269 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:19:14.335 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:19:14.337 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:19:14.349 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:19:17.326 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:19:22.175 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.09:19:26.877 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:19:26.921 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:19:26.922 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-11.09:19:26.934 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:19:26.937 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:19:26.938 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:19:26.952 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:19:26.953 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:19:26.954 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:19:26.959 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:19:26.972 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:19:28.244 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80257 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:19:28.245 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:19:28.685 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:19:28.686 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:19:28.699 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:19:29.277 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:19:29.294 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:19:29.377 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:19:29.386 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:19:30.152 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:19:30.187 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.234 seconds (JVM running for 2.797)
24-07-11.09:19:30.455 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:19:30.459 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:19:30.476 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:19:30.657 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:19:30.677 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:19:30.678 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:19:30.746 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:19:30.748 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:19:30.759 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:19:38.227 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:19:55.942 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:20:00.469 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:20:24.101 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:20:42.502 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:20:45.618 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:20:57.098 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:21:03.034 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.09:21:15.268 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:26:05.370 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m50s93ms).
24-07-11.09:26:05.370 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:26:05.460 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:26:05.463 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-11.09:26:05.499 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:26:05.504 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:26:05.505 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:26:05.527 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:26:05.674 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:26:07.304 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80317 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:26:07.305 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:26:08.046 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:26:08.052 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:26:08.087 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
24-07-11.09:26:08.803 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:26:08.822 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:26:08.910 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:26:08.917 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:26:09.639 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:26:09.673 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.761 seconds (JVM running for 3.439)
24-07-11.09:26:09.919 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:26:09.921 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:26:09.937 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:26:10.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:26:10.163 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:26:10.187 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:26:10.188 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:26:10.258 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:26:10.259 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:26:10.273 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:26:15.316 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:26:21.406 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:26:30.339 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:27:50.886 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m40s603ms).
24-07-11.09:27:50.895 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.09:27:52.119 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:27:52.127 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:27:53.570 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80329 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:27:53.570 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:27:53.996 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:27:53.998 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:27:54.011 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:27:54.613 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:27:54.632 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:27:54.725 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:27:54.733 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:27:55.466 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:27:55.503 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.152 seconds (JVM running for 2.714)
24-07-11.09:27:55.754 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:27:55.921 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:27:55.948 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:27:55.951 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:27:55.962 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:27:55.962 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:27:56.030 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:27:56.032 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:27:56.044 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:28:00.540 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:28:20.516 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:28:29.227 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:28:41.035 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:28:52.555 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:29:00.668 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:32:57.907 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m57s223ms).
24-07-11.09:32:57.905 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:32:57.929 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:32:57.930 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-11.09:32:57.945 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:32:57.948 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:32:57.948 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:32:58.012 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:32:58.017 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:32:59.818 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80390 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:32:59.819 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:33:00.265 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:33:00.267 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:33:00.281 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:33:00.880 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:33:00.903 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:33:00.988 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:33:00.997 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:33:01.682 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:33:01.714 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.134 seconds (JVM running for 2.899)
24-07-11.09:33:01.958 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:33:01.960 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:33:01.976 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:33:02.173 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:33:02.197 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:33:02.198 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:33:02.272 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:33:02.274 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:33:02.288 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:33:07.398 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:33:07.440 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:33:07.440 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-11.09:33:07.453 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:33:07.455 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:33:07.455 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:33:07.473 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:33:07.474 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:33:07.474 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:33:07.476 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:102
24-07-11.09:33:07.489 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-11.09:33:07.510 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:33:07.521 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:33:54.809 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80398 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:33:54.810 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:33:55.249 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:33:55.251 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:33:55.265 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:33:55.851 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:33:55.871 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:33:55.956 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:33:55.967 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:33:56.676 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:33:56.711 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.121 seconds (JVM running for 2.658)
24-07-11.09:33:56.928 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:33:57.098 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:33:57.157 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:33:57.161 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:33:57.171 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:33:57.171 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:33:57.245 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:33:57.248 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:33:57.270 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:33:57.272 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.09:33:57.283 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:33:57.285 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-11.09:33:57.293 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:33:57.295 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:33:57.295 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:33:57.306 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:33:57.307 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:33:57.307 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:33:57.308 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:102
24-07-11.09:33:57.318 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-11.09:33:57.334 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:33:57.337 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:45:41.259 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80475 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:45:41.259 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:45:41.696 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:45:41.697 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:45:41.711 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:45:42.301 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:45:42.321 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:45:42.406 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:45:42.415 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:45:43.131 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:45:43.165 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.17 seconds (JVM running for 2.774)
24-07-11.09:45:43.412 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:45:43.414 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:45:43.430 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:45:43.643 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:45:43.664 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:45:43.664 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:45:43.737 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:45:43.738 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:45:43.751 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:45:43.751 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.09:45:43.766 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:45:43.768 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-11.09:45:43.775 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:45:43.777 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:45:43.777 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:45:43.785 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:45:43.786 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:45:43.786 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:45:43.787 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.09:45:43.788 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.09:45:43.788 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.09:45:43.788 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.09:45:43.788 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.09:45:43.788 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.09:45:43.788 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.09:45:43.788 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.09:45:43.788 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.09:45:43.789 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:45:43.789 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:45:43.791 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:45:43.791 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:45:43.791 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:45:43.791 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.09:45:43.791 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.09:45:43.792 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.09:45:43.792 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.09:45:43.792 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.09:45:43.792 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.09:45:43.792 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.09:45:43.792 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.09:45:43.792 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.09:45:43.793 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:45:43.793 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:45:43.796 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:45:43.796 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:45:43.796 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:45:43.798 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.09:45:43.798 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.09:45:43.798 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.09:45:43.798 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.09:45:43.798 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.09:45:43.798 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.09:45:43.798 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.09:45:43.798 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.09:45:43.798 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.09:45:45.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:45:50.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:45:52.373 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:45:52.379 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:48:02.583 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80502 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:48:02.584 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:48:03.027 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:48:03.028 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:48:03.042 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:48:03.651 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:48:03.670 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:48:03.758 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:48:03.766 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:48:04.480 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:48:04.514 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.177 seconds (JVM running for 2.823)
24-07-11.09:48:04.746 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:48:04.950 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:48:05.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:48:05.007 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:48:05.011 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:48:05.022 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:48:05.022 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:48:05.096 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:48:05.098 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:48:05.130 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:48:05.153 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:48:05.154 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-11.09:48:05.164 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:48:05.167 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:48:05.167 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:48:05.179 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:48:05.180 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:48:05.180 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:48:05.181 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:102
24-07-11.09:48:05.198 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-11.09:48:05.217 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:48:05.221 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:52:56.293 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80575 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:52:56.294 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:52:56.756 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:52:56.757 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:52:56.771 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:52:57.375 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:52:57.394 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:52:57.482 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:52:57.494 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:52:58.200 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:52:58.237 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.177 seconds (JVM running for 2.716)
24-07-11.09:52:58.487 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:52:58.490 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:52:58.491 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:52:58.499 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:52:58.708 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:52:58.741 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:52:58.742 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:52:58.742 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:52:58.743 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.09:52:58.743 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.09:52:58.744 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.09:52:58.744 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.09:52:58.744 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.09:52:58.744 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.09:52:58.744 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.09:52:58.817 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.09:52:58.819 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.09:52:58.820 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:52:58.820 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:52:58.822 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:52:58.822 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:52:58.822 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:52:58.823 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.09:52:58.823 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.09:52:58.823 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.09:52:58.823 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.09:52:58.823 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.09:52:58.823 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.09:52:58.823 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.09:52:58.823 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.09:52:58.823 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.09:52:58.825 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:52:58.825 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:52:58.827 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:52:58.827 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:52:58.827 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:52:58.831 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.09:52:58.831 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.09:52:58.832 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.09:52:58.832 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.09:52:58.832 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.09:52:58.832 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.09:52:58.832 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.09:52:58.832 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.09:52:58.832 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.09:53:00.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:53:05.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:53:10.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:53:15.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:53:20.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:53:25.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:53:30.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:53:35.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:53:36.442 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:53:36.447 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:53:49.571 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80589 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:53:49.572 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:53:50.018 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:53:50.020 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:53:50.038 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:53:50.640 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:53:50.662 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:53:50.752 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:53:50.766 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:53:51.480 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:53:51.515 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.175 seconds (JVM running for 2.751)
24-07-11.09:53:51.764 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:55:45.107 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80598 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:55:45.107 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:55:45.548 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:55:45.549 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:55:45.563 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:55:46.151 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:55:46.170 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:55:46.253 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:55:46.261 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:55:46.966 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:55:47.000 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.113 seconds (JVM running for 2.622)
24-07-11.09:55:47.241 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:56:05.178 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80606 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:56:05.179 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:56:05.607 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:56:05.609 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:56:05.623 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:56:06.211 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:56:06.230 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:56:06.320 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:56:06.328 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:56:07.054 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:56:07.090 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.134 seconds (JVM running for 2.671)
24-07-11.09:56:07.333 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:56:07.336 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:56:07.336 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:56:07.345 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:56:07.569 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:56:07.597 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:56:07.597 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:56:07.598 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:56:07.599 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.09:56:07.600 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.09:56:07.600 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.09:56:07.600 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.09:56:07.600 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.09:56:07.600 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.09:56:07.600 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.09:56:07.668 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.09:56:07.670 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.09:56:07.671 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:56:07.672 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:56:07.673 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:56:07.673 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:56:07.673 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:56:07.674 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.09:56:07.674 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.09:56:07.674 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.09:56:07.674 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.09:56:07.674 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.09:56:07.674 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.09:56:07.674 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.09:56:07.675 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.09:56:07.675 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.09:56:07.676 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:56:07.676 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:56:07.677 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:56:07.677 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:56:07.677 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:56:07.678 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.09:56:07.678 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.09:56:07.678 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.09:56:07.678 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.09:56:07.678 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.09:56:07.678 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.09:56:07.678 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.09:56:07.678 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.09:56:07.678 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.09:56:10.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:56:15.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:56:20.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:56:25.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:56:30.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:56:34.980 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80611 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:56:34.980 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:56:35.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:56:35.408 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:56:35.411 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:56:35.427 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
24-07-11.09:56:36.013 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:56:36.033 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:56:36.117 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:56:36.125 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:56:37.278 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:56:37.325 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.587 seconds (JVM running for 3.126)
24-07-11.09:56:37.602 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:56:37.605 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.09:56:37.621 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:56:37.794 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:56:37.816 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.09:56:37.816 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.09:56:37.891 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.09:56:37.893 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.09:56:37.922 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:56:37.934 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:56:40.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:56:45.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:56:50.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:56:55.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:00.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:05.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:10.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:15.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:20.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:25.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:30.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:35.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:40.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:45.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:49.613 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80628 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:57:49.614 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:57:50.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:57:50.063 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:57:50.064 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:57:50.078 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:57:50.649 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:57:50.669 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:57:50.750 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:57:50.758 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:57:51.463 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:57:51.499 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.11 seconds (JVM running for 2.513)
24-07-11.09:57:51.714 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:57:51.887 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:57:51.967 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:57:51.970 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100003 ruleModel: rule_default awardId: 107
24-07-11.09:57:51.970 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100003 107 rule_default
24-07-11.09:57:52.000 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:57:52.004 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:57:55.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:00.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:05.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:10.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:15.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:20.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:20.533 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80635 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:58:20.534 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:58:20.969 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:58:20.971 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:58:20.984 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:58:21.548 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:58:21.566 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:58:21.650 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:58:21.663 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:58:22.359 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:58:22.393 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.077 seconds (JVM running for 2.558)
24-07-11.09:58:22.644 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:58:22.647 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100003 ruleModel: rule_default awardId: 108
24-07-11.09:58:22.648 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100003 108 rule_default
24-07-11.09:58:22.655 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:58:22.827 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:58:22.879 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:58:22.881 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:58:25.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:30.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:35.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:40.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:45.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:50.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:58:55.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:00.121 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:05.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:10.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:15.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:20.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:25.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:30.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:32.630 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80650 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:59:32.630 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:59:33.057 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:59:33.058 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:59:33.072 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.09:59:33.652 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:59:33.670 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:59:33.759 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:59:33.768 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:59:34.480 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:59:34.516 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.128 seconds (JVM running for 2.685)
24-07-11.09:59:34.731 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:59:34.910 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:59:34.982 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:59:35.000 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.09:59:35.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:35.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:35.052 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:59:35.060 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:59:40.000 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:45.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:50.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.09:59:51.593 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:59:51.599 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.09:59:53.678 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80664 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.09:59:53.678 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.09:59:54.141 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.09:59:54.143 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.09:59:54.159 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
24-07-11.09:59:54.742 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.09:59:54.760 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.09:59:54.844 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:59:54.854 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.09:59:55.617 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.09:59:55.654 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.198 seconds (JVM running for 2.698)
24-07-11.09:59:55.882 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.09:59:56.045 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.09:59:56.096 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.09:59:56.111 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.09:59:56.111 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.09:59:56.122 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.09:59:56.123 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.09:59:56.123 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.09:59:56.124 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:102
24-07-11.09:59:56.136 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-11.09:59:56.155 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.09:59:56.164 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:00:13.191 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80674 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:00:13.192 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:00:13.618 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:00:13.620 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:00:13.634 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:00:14.214 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:00:14.234 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:00:14.318 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:00:14.330 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:00:15.035 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:00:15.069 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.103 seconds (JVM running for 2.627)
24-07-11.10:00:15.306 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:00:15.309 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:00:15.310 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:00:15.318 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:00:15.491 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:00:15.517 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:15.517 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:00:15.518 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:15.519 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:00:15.519 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:15.519 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:00:15.519 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:00:15.519 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:00:15.520 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:00:15.520 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:00:15.603 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:00:15.605 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:00:15.607 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:00:15.607 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:00:15.609 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:15.609 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:00:15.609 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:15.609 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:00:15.609 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:15.609 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:00:15.610 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:00:15.610 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:00:15.610 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:00:15.610 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:00:15.610 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:00:15.610 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:00:15.611 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:00:15.611 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:00:15.613 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:15.613 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:00:15.613 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:15.614 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:00:15.614 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:15.614 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:00:15.614 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:00:15.614 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:00:15.614 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:00:15.614 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:00:15.614 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:00:15.614 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:00:20.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:00:25.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:00:25.258 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:00:25.262 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:00:31.532 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80679 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:00:31.533 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:00:31.945 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:00:31.946 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:00:31.959 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:00:32.525 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:00:32.545 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:00:32.632 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:00:32.639 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:00:33.340 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:00:33.378 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.061 seconds (JVM running for 2.544)
24-07-11.10:00:33.611 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:00:33.614 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.10:00:33.630 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:00:33.793 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:00:33.833 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:00:33.835 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:00:49.087 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80690 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:00:49.087 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:00:49.591 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:00:49.592 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:00:49.607 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:00:50.359 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:00:50.405 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:00:50.535 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:00:50.547 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:00:51.319 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:00:51.352 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.496 seconds (JVM running for 2.949)
24-07-11.10:00:51.585 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:00:51.588 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:00:51.588 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:00:51.597 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:00:51.766 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:00:51.793 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:51.793 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:00:51.793 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:51.797 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:00:51.797 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:00:51.797 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:00:51.797 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:00:51.797 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:00:51.798 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:00:51.798 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:00:51.870 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:00:51.872 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:00:51.890 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:00:51.898 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:01:07.802 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80694 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:01:07.803 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:01:08.243 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:01:08.245 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:01:08.259 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:01:08.844 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:01:08.863 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:01:08.955 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:01:08.967 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:01:09.661 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:01:09.695 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.112 seconds (JVM running for 2.669)
24-07-11.10:01:09.932 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:01:09.935 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:01:09.936 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:01:09.944 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:01:10.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:01:10.121 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:01:10.147 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:01:10.148 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:01:10.148 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:01:10.150 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:01:10.150 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:01:10.150 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:01:10.150 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:01:10.150 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:01:10.151 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:01:10.151 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:01:10.222 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:01:10.224 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:01:10.252 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:01:10.261 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:01:21.013 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80702 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:01:21.014 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:01:21.444 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:01:21.445 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:01:21.460 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:01:22.050 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:01:22.070 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:01:22.153 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:01:22.161 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:01:22.874 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:01:22.914 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.132 seconds (JVM running for 2.6)
24-07-11.10:01:23.154 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:01:23.164 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:01:23.329 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:01:23.377 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:01:23.378 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:01:49.032 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80709 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:01:49.032 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:01:49.472 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:01:49.474 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:01:49.492 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
24-07-11.10:01:50.087 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:01:50.107 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:01:50.197 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:01:50.207 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:01:50.908 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:01:50.941 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.13 seconds (JVM running for 2.596)
24-07-11.10:01:51.178 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:01:51.181 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.10:01:51.197 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:01:51.365 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:01:51.405 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:01:51.407 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:02:12.497 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80716 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:02:12.497 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:02:12.921 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:02:12.922 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:02:12.937 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:02:13.507 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:02:13.526 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:02:13.613 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:02:13.621 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:02:14.323 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:02:14.360 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.09 seconds (JVM running for 2.569)
24-07-11.10:02:14.611 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:02:14.613 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.10:02:14.628 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:02:14.797 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:02:14.836 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:02:14.837 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:02:47.900 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80721 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:02:47.901 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:02:48.322 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:02:48.324 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:02:48.338 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:02:48.928 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:02:48.948 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:02:49.033 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:02:49.044 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:02:49.747 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:02:49.780 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.102 seconds (JVM running for 2.654)
24-07-11.10:02:50.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:02:50.037 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:02:50.209 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:02:50.236 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:02:50.240 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.10:02:50.269 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:02:50.271 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:03:02.790 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80725 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:03:02.790 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:03:03.226 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:03:03.228 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:03:03.242 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:03:03.826 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:03:03.845 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:03:03.927 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:03:03.934 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:03:04.712 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:03:04.749 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.178 seconds (JVM running for 2.704)
24-07-11.10:03:04.998 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:03:05.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:03:05.009 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:03:05.179 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:03:05.204 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-11.10:03:05.215 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-11.10:03:05.215 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-11.10:03:05.285 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-11.10:03:05.287 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-11.10:03:05.312 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:03:05.323 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:03:18.616 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80738 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:03:18.616 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:03:19.164 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:03:19.166 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:03:19.183 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
24-07-11.10:03:19.772 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:03:19.792 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:03:19.875 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:03:19.884 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:03:20.576 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:03:20.608 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.224 seconds (JVM running for 2.694)
24-07-11.10:03:20.844 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:03:20.847 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 101
24-07-11.10:03:20.848 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 101 rule_default
24-07-11.10:03:20.856 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:03:21.018 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:03:21.048 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:101
24-07-11.10:03:21.048 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:03:21.048 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:101
24-07-11.10:03:21.050 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:101
24-07-11.10:03:21.066 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-11.10:03:21.086 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:03:21.088 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:04:01.928 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80743 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:04:01.929 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:04:02.359 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:04:02.361 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:04:02.375 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:04:02.953 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:04:02.972 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:04:03.057 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:04:03.070 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:04:03.770 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:04:03.803 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.087 seconds (JVM running for 2.597)
24-07-11.10:04:04.014 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:04:04.179 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:04:04.235 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:04:04.248 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:04:04.248 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:04:04.259 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:04.260 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:04:04.260 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:04.261 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:04.275 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-11.10:04:04.298 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:04:04.299 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:04:21.018 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80749 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:04:21.018 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:04:21.470 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:04:21.472 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:04:21.486 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:04:22.072 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:04:22.092 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:04:22.174 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:04:22.181 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:04:22.873 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:04:22.905 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.109 seconds (JVM running for 2.606)
24-07-11.10:04:23.150 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:04:23.154 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:04:23.154 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:04:23.163 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:04:23.331 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:04:23.357 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:23.357 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:04:23.358 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:23.359 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:04:23.360 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:23.360 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:04:23.360 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:04:23.360 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:04:23.360 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:04:23.360 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:04:23.432 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:04:23.434 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:04:23.436 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:04:23.436 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:04:23.438 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:23.438 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:04:23.438 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:23.438 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:04:23.438 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:23.439 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:04:23.439 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:04:23.439 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:04:23.439 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:04:23.439 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:04:23.439 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:04:23.439 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:04:23.440 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:04:23.440 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:04:23.443 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:23.443 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:04:23.443 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:23.444 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:04:23.444 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:04:23.444 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:04:23.444 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:04:23.444 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:04:23.444 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:04:23.444 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:04:23.444 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:04:23.444 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:04:25.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:04:25.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存 strategyId:100006 awardId:102
24-07-11.10:04:30.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:04:35.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:04:40.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:04:45.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:04:50.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:04:55.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:00.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:05.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:10.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:15.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:20.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:25.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:30.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:35.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:40.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:45.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:50.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:05:55.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:00.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:05.000 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:10.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:15.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:20.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:25.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:30.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:35.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:40.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:45.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:50.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:55.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:06:56.889 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:06:56.896 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:07:36.121 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80776 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:07:36.122 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:07:36.554 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:07:36.555 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:07:36.570 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:07:37.161 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:07:37.182 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:07:37.265 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:07:37.273 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:07:37.994 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:07:38.030 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.127 seconds (JVM running for 2.579)
24-07-11.10:07:38.268 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:07:38.270 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.10:07:38.287 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:07:38.457 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:07:38.497 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:07:38.498 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:07:51.928 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80783 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:07:51.928 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:07:52.350 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:07:52.351 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:07:52.366 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:07:52.958 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:07:52.982 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:07:53.075 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:07:53.087 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:07:53.816 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:07:53.851 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.147 seconds (JVM running for 2.611)
24-07-11.10:07:54.089 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:07:54.091 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.10:07:54.106 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:07:54.283 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:07:54.323 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:07:54.325 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:08:19.257 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80791 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:08:19.257 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:08:19.695 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:08:19.696 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:08:19.710 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:08:20.283 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:08:20.302 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:08:20.386 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:08:20.393 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:08:21.069 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:08:21.102 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.074 seconds (JVM running for 2.548)
24-07-11.10:08:21.314 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:08:21.486 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:08:21.558 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:08:21.582 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:08:21.583 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:09:16.799 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80797 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:09:16.799 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:09:17.229 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:09:17.231 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:09:17.245 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:09:17.832 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:09:17.851 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:09:17.935 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:09:17.943 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:09:18.666 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:09:18.700 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.127 seconds (JVM running for 2.617)
24-07-11.10:09:18.953 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:09:18.956 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.10:09:18.971 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:09:19.145 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:09:19.185 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:09:19.187 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:10:35.722 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80821 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:10:35.723 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:10:36.151 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:10:36.152 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:10:36.167 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:10:36.753 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:10:36.773 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:10:36.860 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:10:36.871 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:10:37.564 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:10:37.599 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.108 seconds (JVM running for 2.622)
24-07-11.10:10:37.853 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:10:37.855 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-11.10:10:37.870 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:10:38.048 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:10:38.088 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:10:38.090 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:12:03.827 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80873 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:12:03.828 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:12:04.261 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:12:04.262 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:12:04.276 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:12:04.849 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:12:04.868 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:12:04.952 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:12:04.960 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:12:05.658 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:12:05.693 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.081 seconds (JVM running for 2.62)
24-07-11.10:12:05.905 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:12:06.071 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:12:06.135 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:12:06.146 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100003 ruleModel: rule_default awardId: 107
24-07-11.10:12:06.147 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100003 107 rule_default
24-07-11.10:12:06.173 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:12:06.186 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:14:03.423 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80905 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:14:03.424 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:14:03.891 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:14:03.892 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:14:03.907 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:14:04.489 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:14:04.508 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:14:04.598 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:14:04.606 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:14:05.319 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:14:05.356 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.18 seconds (JVM running for 2.763)
24-07-11.10:14:05.610 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:14:05.614 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100003 ruleModel: rule_default awardId: 107
24-07-11.10:14:05.614 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100003 107 rule_default
24-07-11.10:14:05.623 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:14:05.800 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:14:05.845 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:14:05.847 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:14:37.086 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80925 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:14:37.087 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:14:37.535 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:14:37.537 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:14:37.551 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:14:38.134 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:14:38.153 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:14:38.237 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:14:38.246 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:14:38.931 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:14:38.963 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.1 seconds (JVM running for 2.639)
24-07-11.10:14:39.215 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:14:39.225 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:14:39.406 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:14:39.453 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:14:39.454 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:15:08.065 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 80937 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:15:08.065 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:15:08.591 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:15:08.593 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:15:08.612 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
24-07-11.10:15:09.400 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:15:09.427 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:15:09.519 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:15:09.530 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:15:10.273 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:15:10.319 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.544 seconds (JVM running for 3.08)
24-07-11.10:15:10.550 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:15:10.766 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:15:10.824 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:15:10.827 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:15:10.828 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:15:10.839 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:15:10.839 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:15:10.839 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:15:10.842 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:102
24-07-11.10:15:10.873 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-11.10:15:10.912 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:15:10.928 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-11.10:26:55.749 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 81035 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-11.10:26:55.750 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-11.10:26:56.180 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-11.10:26:56.181 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-11.10:26:56.196 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-11.10:26:56.787 [main            ] INFO  Version                - Redisson 3.26.0
24-07-11.10:26:56.805 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-11.10:26:56.891 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:26:56.899 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-11.10:26:57.592 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-11.10:26:57.627 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.144 seconds (JVM running for 2.694)
24-07-11.10:26:57.863 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-11.10:26:58.069 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-11.10:26:58.126 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-11.10:26:58.139 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:26:58.139 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:26:58.162 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:26:58.163 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:26:58.163 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:26:58.165 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:102
24-07-11.10:26:58.179 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-11.10:26:58.179 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 102 null
24-07-11.10:26:58.254 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:26:58.256 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":102}
24-07-11.10:26:58.258 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:26:58.258 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:26:58.264 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:26:58.264 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:26:58.265 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:26:58.265 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:26:58.265 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:26:58.265 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:26:58.266 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:26:58.266 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:26:58.266 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:26:58.266 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:26:58.266 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:26:58.266 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:26:58.267 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-11.10:26:58.267 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-11.10:26:58.269 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-11.10:26:58.269 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-11.10:26:58.269 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-11.10:26:58.269 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-11.10:26:58.269 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-11.10:26:58.269 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-11.10:26:58.269 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-11.10:26:58.270 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-11.10:26:58.270 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-11.10:26:58.270 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-11.10:26:58.270 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-11.10:26:58.270 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-11.10:27:00.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:27:05.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:27:05.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存 strategyId:100006 awardId:102
24-07-11.10:27:10.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:27:15.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:27:20.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:27:25.017 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:27:30.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:27:35.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-11.10:27:39.901 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-11.10:27:39.907 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
