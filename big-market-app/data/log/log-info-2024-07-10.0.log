24-07-10.15:41:28.226 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 76837 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.15:41:28.227 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.15:41:28.811 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.15:41:28.813 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.15:41:28.829 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
24-07-10.15:41:29.521 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.15:41:29.544 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.15:41:29.644 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:41:29.657 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:41:30.395 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.15:41:30.428 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.547 seconds (JVM running for 3.29)
24-07-10.15:41:30.683 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.15:41:30.947 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.15:41:31.022 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:41:31.027 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.15:41:31.039 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.15:41:31.040 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.15:41:31.121 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.15:41:31.123 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.15:41:31.149 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:41:31.151 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100003 ruleModel: rule_blacklist
24-07-10.15:41:31.171 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:41:31.175 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.15:41:31.187 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:41:31.189 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.15:41:31.189 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 102 rule_default
24-07-10.15:41:31.205 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:102
24-07-10.15:41:31.205 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.15:41:31.205 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:102
24-07-10.15:41:31.206 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:102
24-07-10.15:41:31.225 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-10.15:41:31.225 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:xiaofuge strategyId:100006 awardId:102 ruleValue:1,100
24-07-10.15:41:31.245 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.15:41:31.250 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.15:42:19.727 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 76889 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.15:42:19.728 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.15:42:20.184 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.15:42:20.186 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.15:42:20.205 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
24-07-10.15:42:20.809 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.15:42:20.828 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.15:42:20.926 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:42:20.937 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:42:21.659 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.15:42:21.699 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.276 seconds (JVM running for 3.042)
24-07-10.15:42:21.983 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:42:21.986 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.15:42:22.006 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.15:42:22.269 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.15:42:22.290 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.15:42:22.291 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.15:42:22.361 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.15:42:22.363 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.15:42:22.375 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:42:22.375 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100003 ruleModel: rule_blacklist
24-07-10.15:42:22.388 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:42:22.390 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.15:42:22.398 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:42:22.410 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.15:42:22.411 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 102 rule_default
24-07-10.15:42:22.426 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:102
24-07-10.15:42:22.426 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.15:42:22.427 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:102
24-07-10.15:42:22.430 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.15:42:22.430 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:xiaofuge strategyId:100006 awardId:102
24-07-10.15:42:22.431 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.15:42:22.460 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.15:42:22.476 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.15:43:56.261 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 76910 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.15:43:56.262 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.15:43:56.689 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.15:43:56.691 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.15:43:56.708 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
24-07-10.15:43:57.326 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.15:43:57.344 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.15:43:57.438 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:43:57.449 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:43:58.145 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.15:43:58.178 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.193 seconds (JVM running for 2.752)
24-07-10.15:43:58.424 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:43:58.426 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.15:43:58.443 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.15:43:58.650 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.15:43:58.672 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.15:43:58.673 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.15:43:58.742 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.15:43:58.744 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.15:43:58.758 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:43:58.759 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.15:43:58.779 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:43:58.781 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.15:43:58.789 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:43:58.791 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.15:43:58.791 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.15:43:58.800 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.15:43:58.800 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.15:43:58.801 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.15:43:58.802 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.15:43:58.802 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.15:43:58.802 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.15:43:58.821 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.15:43:58.831 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.15:47:15.944 [main            ] INFO  StrategyRepositoryTest - Starting StrategyRepositoryTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 76938 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.15:47:15.944 [main            ] INFO  StrategyRepositoryTest - The following 1 profile is active: "dev"
24-07-10.15:47:16.416 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.15:47:16.418 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.15:47:16.432 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-10.15:47:17.040 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.15:47:17.062 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.15:47:17.152 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:47:17.161 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:47:17.875 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.15:47:17.911 [main            ] INFO  StrategyRepositoryTest - Started StrategyRepositoryTest in 2.281 seconds (JVM running for 2.829)
24-07-10.15:47:18.145 [main            ] INFO  StrategyRepositoryTest - 测试结果：10
24-07-10.15:47:18.266 [main            ] INFO  StrategyRepositoryTest - 测试结果：{"treeDesc":"规则树","treeId":"tree_lock","treeName":"规则树","treeNodeMap":{"rule_lock":{"ruleDesc":"限定用户已完成N次抽奖后解锁","ruleKey":"rule_lock","ruleValue":"1","treeId":"tree_lock","treeNodeLineVOList":[{"ruleLimitType":"EQUAL","ruleLimitValue":"ALLOW","ruleNodeFrom":"rule_lock","ruleNodeTo":"rule_stock","treeId":"tree_lock"},{"ruleLimitType":"EQUAL","ruleLimitValue":"TAKE_OVER","ruleNodeFrom":"rule_lock","ruleNodeTo":"rule_luck_award","treeId":"tree_lock"}]},"rule_stock":{"ruleDesc":"库存扣减规则","ruleKey":"rule_stock","treeId":"tree_lock","treeNodeLineVOList":[{"ruleLimitType":"EQUAL","ruleLimitValue":"TAKE_OVER","ruleNodeFrom":"rule_stock","ruleNodeTo":"rule_luck_award","treeId":"tree_lock"}]},"rule_luck_award":{"ruleDesc":"兜底奖品随机积分","ruleKey":"rule_luck_award","ruleValue":"1,100","treeId":"tree_lock"}},"treeRootRuleNode":"rule_lock"}
24-07-10.15:47:20.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:47:20.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存 strategyId:100006 awardId:102
24-07-10.15:47:20.024 [scheduling-1    ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.15:47:20.227 [scheduling-1    ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.15:47:25.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:47:25.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存 strategyId:100001 awardId:102
24-07-10.15:47:30.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:47:35.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:47:40.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:47:45.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:47:50.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:47:55.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:48:00.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:48:05.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:48:10.000 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:48:15.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:48:20.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.15:48:21.601 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.15:48:21.606 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.15:49:26.371 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 76957 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.15:49:26.371 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.15:49:26.824 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.15:49:26.825 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.15:49:26.840 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
24-07-10.15:49:27.478 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.15:49:27.496 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.15:49:27.585 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:49:27.593 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.15:49:28.326 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.15:49:28.362 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 2.232 seconds (JVM running for 2.787)
24-07-10.15:49:28.608 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:49:28.610 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.15:49:28.625 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.15:49:28.842 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.15:49:28.868 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.15:49:28.868 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.15:49:28.940 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.15:49:28.941 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.15:49:28.953 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:49:28.954 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.15:49:28.967 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:49:28.968 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.15:49:28.980 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.15:49:28.982 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.15:49:28.982 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.15:49:28.991 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.15:49:28.991 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.15:49:28.992 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.15:49:28.993 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.15:49:28.993 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.15:49:28.993 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.15:49:29.021 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.15:49:29.035 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.21:26:30.686 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 78480 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.21:26:30.687 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.21:26:31.506 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.21:26:31.508 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.21:26:31.531 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
24-07-10.21:26:32.567 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.21:26:32.598 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.21:26:32.746 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.21:26:32.762 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.21:26:34.106 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.21:26:34.177 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 4.028 seconds (JVM running for 5.383)
24-07-10.21:26:34.593 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:26:34.597 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.21:26:34.626 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.21:26:35.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.21:26:35.026 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.21:26:35.088 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.21:26:35.089 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.21:26:35.223 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.21:26:35.227 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.21:26:35.255 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:26:35.257 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.21:26:35.284 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:26:35.286 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.21:26:35.308 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:26:35.319 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.21:26:35.321 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.21:26:35.352 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.21:26:35.359 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.21:26:35.360 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.21:26:35.363 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.21:26:35.363 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.21:26:35.364 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.21:26:35.410 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.21:26:35.423 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.21:30:47.553 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 78504 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.21:30:47.554 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.21:30:48.406 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.21:30:48.408 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.21:30:48.432 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
24-07-10.21:30:49.486 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.21:30:49.518 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.21:30:49.681 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.21:30:49.697 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.21:30:50.979 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.21:30:51.049 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.92 seconds (JVM running for 5.188)
24-07-10.21:30:51.498 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:30:51.502 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.21:30:51.534 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.21:30:51.849 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.21:30:51.886 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.21:30:51.887 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.21:30:52.002 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.21:30:52.005 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.21:30:52.031 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:30:52.032 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.21:30:52.061 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:30:52.064 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.21:30:52.080 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:30:52.085 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.21:30:52.086 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.21:30:52.105 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.21:30:52.106 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.21:30:52.106 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.21:30:52.109 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.21:30:52.109 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.21:30:52.109 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.21:30:52.157 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.21:30:52.172 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.21:35:57.089 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 78536 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.21:35:57.089 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.21:35:57.915 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.21:35:57.917 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.21:35:57.941 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
24-07-10.21:35:59.015 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.21:35:59.051 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.21:35:59.202 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.21:35:59.219 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.21:36:00.438 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.21:36:00.496 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.858 seconds (JVM running for 5.086)
24-07-10.21:36:00.961 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:36:00.965 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.21:36:00.993 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.21:36:01.340 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.21:36:01.372 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.21:36:01.373 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.21:36:01.492 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.21:36:01.496 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.21:36:01.516 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:36:01.517 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.21:36:01.538 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:36:01.541 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.21:36:01.554 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.21:36:01.558 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.21:36:01.558 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.21:36:01.577 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.21:36:01.578 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.21:36:01.579 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.21:36:01.582 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.21:36:01.582 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.21:36:01.582 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.21:36:01.623 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.21:36:01.632 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:01:27.274 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 78797 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:01:27.275 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:01:28.122 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:01:28.125 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:01:28.148 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
24-07-10.22:01:29.173 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:01:29.208 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:01:29.346 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:01:29.371 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:01:30.622 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:01:30.687 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.895 seconds (JVM running for 5.128)
24-07-10.22:01:31.140 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:01:31.146 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:01:31.176 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:01:31.573 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:01:31.625 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:01:31.626 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:01:31.755 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:01:31.759 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:01:31.780 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:01:31.782 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.22:01:31.808 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:01:31.811 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:01:31.835 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:01:31.839 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:01:31.840 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:01:31.862 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.22:01:31.863 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.22:01:31.864 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.22:01:31.867 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.22:01:31.867 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.22:01:31.868 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.22:01:31.908 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:01:31.919 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:01:58.879 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 78807 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:01:58.880 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:02:00.161 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:02:00.164 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:02:00.192 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
24-07-10.22:02:01.369 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:02:01.401 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:02:01.573 [redisson-netty-1-5] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:02:01.591 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:02:02.900 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:02:03.003 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 4.585 seconds (JVM running for 6.087)
24-07-10.22:02:03.451 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:02:03.456 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:02:03.488 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:02:03.808 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:02:03.843 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:02:03.844 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:02:03.968 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:02:03.973 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:02:03.995 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:02:12.257 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:02:57.918 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=54s5ms).
24-07-10.22:03:15.139 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:03:41.490 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:04:01.168 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:04:11.368 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:04:37.884 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:04:43.053 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:05:07.588 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:05:12.745 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:05:12.753 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.22:05:16.053 [scheduling-1    ] ERROR UpdateAwardStockJob    - 定时任务，更新奖品消耗库存失败
org.springframework.dao.QueryTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_query_key], channel: [id: 0x25d7b21a, L:/127.0.0.1:55750 - R:127.0.0.1/127.0.0.1:6379]; nested exception is org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_query_key], channel: [id: 0x25d7b21a, L:/127.0.0.1:55750 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:48)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.dzc.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$769d1b7d.takeQueueValue(<generated>)
	at com.dzc.domain.strategy.service.raffle.DefaultRaffleStrategy.takeQueueValue(DefaultRaffleStrategy.java:60)
	at com.dzc.trigger.job.UpdateAwardStockJob.exec(UpdateAwardStockJob.java:22)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_query_key], channel: [id: 0x25d7b21a, L:/127.0.0.1:55750 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.command.RedisExecutor.lambda$scheduleResponseTimeout$9(RedisExecutor.java:431)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
24-07-10.22:05:25.311 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:08:24.130 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m8s107ms).
24-07-10.22:08:24.248 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:08:24.253 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:08:24.283 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:08:24.288 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:08:24.288 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:08:24.322 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.22:08:24.323 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.22:08:24.324 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.22:08:24.332 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:08:24.349 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:08:27.278 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 78826 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:08:27.279 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:08:28.108 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:08:28.111 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:08:28.134 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
24-07-10.22:08:29.180 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:08:29.222 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:08:29.385 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:08:29.403 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:08:30.643 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:08:30.710 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.937 seconds (JVM running for 5.212)
24-07-10.22:08:31.218 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:08:31.223 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:08:31.250 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:08:31.536 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:08:31.572 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:08:31.573 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:08:31.707 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:08:31.712 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:08:31.735 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:08:38.721 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:08:41.772 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.22:08:45.410 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:08:46.878 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:08:46.884 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:08:47.022 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:08:47.027 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:08:47.028 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:08:47.061 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.22:08:47.067 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.22:08:47.072 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.22:08:47.079 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.22:08:47.079 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.22:08:47.080 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.22:09:02.530 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:15:04.707 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6m2s177ms).
24-07-10.22:15:04.765 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:15:04.773 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:15:07.568 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 78899 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:15:07.569 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:15:08.327 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:15:08.329 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:15:08.352 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
24-07-10.22:15:09.241 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:15:09.271 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:15:09.401 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:15:09.414 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:15:10.532 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:15:10.589 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.422 seconds (JVM running for 4.565)
24-07-10.22:15:10.991 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:15:10.994 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:15:11.020 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:15:11.288 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:15:11.319 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:15:11.320 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:15:11.421 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:15:11.424 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:15:11.444 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:15:15.844 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:16:01.480 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:16:16.629 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:16:36.375 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:17:17.422 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.22:17:17.480 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:17:17.483 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:17:18.608 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:17:18.615 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:17:50.250 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 78948 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:17:50.251 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:17:51.015 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:17:51.018 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:17:51.041 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
24-07-10.22:17:51.947 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:17:51.978 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:17:52.115 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:17:52.129 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:17:53.270 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:17:53.330 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.441 seconds (JVM running for 4.456)
24-07-10.22:17:53.683 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:17:53.973 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:17:54.055 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:17:54.061 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:17:54.076 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:17:54.077 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:17:54.211 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:17:54.215 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:17:54.256 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:17:56.230 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:18:16.079 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:18:22.579 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:19:03.113 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:19:34.607 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.22:19:34.649 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:19:34.650 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:19:34.663 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:19:34.666 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:19:34.667 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:19:34.693 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:19:34.699 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:21:02.187 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 78972 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:21:02.188 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:21:02.969 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:21:02.972 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:21:02.995 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
24-07-10.22:21:03.897 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:21:03.931 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:21:04.066 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:21:04.095 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:21:05.218 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:21:05.269 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.465 seconds (JVM running for 4.425)
24-07-10.22:21:05.660 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:21:05.663 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:21:05.688 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:21:05.967 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:21:06.001 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:21:06.002 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:21:06.125 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:21:06.131 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:21:06.156 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:21:08.968 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.22:21:09.030 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:21:09.032 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:21:09.056 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:21:09.095 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:21:09.102 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:37:11.265 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 79082 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:37:11.266 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:37:12.008 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:37:12.010 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:37:12.033 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
24-07-10.22:37:12.945 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:37:12.974 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:37:13.119 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:37:13.133 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:37:14.240 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:37:14.298 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.442 seconds (JVM running for 4.562)
24-07-10.22:37:14.699 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:37:14.703 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:37:14.728 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:37:15.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:37:15.085 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:37:15.132 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:37:15.132 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:37:15.250 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:37:15.254 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:37:15.272 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:37:17.908 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.22:37:17.946 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:37:17.947 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:37:17.968 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:37:17.976 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:37:17.977 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:37:18.026 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.22:37:18.027 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.22:37:18.027 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.22:37:18.031 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:102
24-07-10.22:37:18.054 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-10.22:37:18.096 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:37:18.101 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:37:50.881 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 79092 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:37:50.882 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:37:51.603 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:37:51.606 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:37:51.629 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
24-07-10.22:37:52.534 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:37:52.564 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:37:52.705 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:37:52.722 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:37:53.813 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:37:53.867 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.481 seconds (JVM running for 4.486)
24-07-10.22:37:54.227 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:37:54.495 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:37:54.581 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:37:54.586 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:37:54.601 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:37:54.602 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:37:54.733 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:37:54.737 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:37:54.776 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:37:56.779 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:37:56.787 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.22:37:56.806 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:37:56.808 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:37:56.821 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:37:56.826 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:37:56.827 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:37:56.856 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.22:37:56.857 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.22:37:56.858 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.22:37:56.859 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:dzc strategyId:100006 awardId:102
24-07-10.22:37:56.880 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
24-07-10.22:37:56.907 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:37:56.912 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:39:29.843 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 79102 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:39:29.844 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:39:30.604 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:39:30.606 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:39:30.634 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
24-07-10.22:39:31.532 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:39:31.563 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:39:31.698 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:39:31.711 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:39:32.849 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:39:32.911 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.435 seconds (JVM running for 4.461)
24-07-10.22:39:33.361 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:39:33.365 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:39:33.403 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:39:33.726 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:39:33.759 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:39:33.759 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:39:33.875 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:39:33.880 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:39:33.903 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:39:37.405 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:39:37.412 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: dzc strategyId: 100003 ruleModel: rule_blacklist
24-07-10.22:39:37.443 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:39:37.444 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:39:37.455 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:39:37.458 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:39:37.458 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:39:37.476 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:37.477 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.22:39:37.478 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:37.493 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:39:37.505 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-07-10.22:39:45.198 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 17.0.10 on dongzhichengdeMacBook-Air.local with PID 79114 (started by dongzhicheng in /Users/dongzhicheng/Desktop/Project/big-market/big-market-app)
24-07-10.22:39:45.199 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-07-10.22:39:45.959 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-07-10.22:39:45.961 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-07-10.22:39:45.985 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
24-07-10.22:39:46.891 [main            ] INFO  Version                - Redisson 3.26.0
24-07-10.22:39:46.920 [main            ] WARN  DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
24-07-10.22:39:47.056 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:39:47.072 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-07-10.22:39:48.187 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-07-10.22:39:48.252 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 3.555 seconds (JVM running for 4.45)
24-07-10.22:39:48.633 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:39:48.636 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user003 strategyId: 100001 ruleModel: rule_blacklist
24-07-10.22:39:48.660 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-07-10.22:39:48.953 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-07-10.22:39:48.987 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user003 strategyId: 100001 ruleModel: rule_blacklist awardId: 100
24-07-10.22:39:48.987 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100001 100 rule_blacklist
24-07-10.22:39:49.101 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-07-10.22:39:49.106 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-07-10.22:39:49.126 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:39:51.429 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:39:53.177 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:39:53.178 [main            ] INFO  RaffleStrategyTest     - 测试结果：null
24-07-10.22:39:53.188 [main            ] INFO  RaffleStrategyTest     - 测试结果：true
24-07-10.22:39:53.189 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:39:53.190 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:39:53.202 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:53.203 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.22:39:53.204 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:53.206 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.22:39:53.206 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:53.206 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.22:39:53.206 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-10.22:39:53.206 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-10.22:39:53.206 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-10.22:39:53.206 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-10.22:39:53.207 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-10.22:39:53.211 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-10.22:39:53.213 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:39:53.213 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:39:53.215 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:53.215 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.22:39:53.216 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:53.217 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.22:39:53.217 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:53.217 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.22:39:53.217 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-10.22:39:53.217 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-10.22:39:53.217 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-10.22:39:53.217 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-10.22:39:53.217 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-10.22:39:53.217 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-10.22:39:53.219 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: dzc strategyId: 100006 ruleModel: rule_default awardId: 102
24-07-10.22:39:53.220 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 dzc 100006 102 rule_default
24-07-10.22:39:53.222 [main            ] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:53.222 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
24-07-10.22:39:53.222 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:53.223 [main            ] INFO  StrategyRepository     - 策略奖品库存加锁失败 strategy_award_count_key_100006_102_0
24-07-10.22:39:53.223 [main            ] WARN  RuleStockLogicTreeNode - 规则过滤-库存扣减-告警，库存不足。userId:dzc strategyId:100006 awardId:102
24-07-10.22:39:53.223 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0000
24-07-10.22:39:53.223 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:102 ruleValue:101:1,100
24-07-10.22:39:53.223 [main            ] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:dzc strategyId:100006 awardId:101 awardRuleValue:1,100
24-07-10.22:39:53.223 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
24-07-10.22:39:53.223 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 dzc 100006 101 1,100
24-07-10.22:39:53.224 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100006,"userId":"dzc"}
24-07-10.22:39:53.224 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardConfig":"1,100","awardId":101}
24-07-10.22:39:55.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:40:00.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:40:05.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:40:10.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-07-10.22:40:12.246 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-07-10.22:40:12.257 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
